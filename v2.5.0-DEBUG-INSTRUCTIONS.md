# YOLO Yacht Search v2.5.0 - Debug Version Installation & Testing Instructions

**Version:** 2.5.0 (Debug Build)  
**Date:** 2025-11-30  
**Purpose:** Comprehensive debug logging to identify availability check issue

---

## What's New in v2.5.0

### Debug Logging Added
This version includes extensive debug logging to help identify why the availability check shows "Not Available" even when the API returns available offers.

**Debug logs will show:**
- Incoming AJAX request parameters (yacht_id, date_from, date_to)
- API request details (formatted dates, endpoint)
- API response details (success status, data type, offer count)
- Final return values (success, available, price)

### Authentication Fix
- Removed incorrect "Bearer " prefix from API authentication
- Now uses raw API key as per Booking Manager documentation

---

## Installation Instructions

1. **Backup your current plugin** (if you haven't already)
   
2. **Deactivate the current plugin:**
   - Go to WordPress Admin → Plugins
   - Find "YOLO Yacht Search & Booking"
   - Click "Deactivate"

3. **Delete the old plugin:**
   - After deactivating, click "Delete"
   - Confirm deletion

4. **Install v2.5.0:**
   - Go to Plugins → Add New → Upload Plugin
   - Choose `yolo-yacht-search-v2.5.0-debug.zip`
   - Click "Install Now"
   - Click "Activate Plugin"

5. **Enable WordPress Debug Logging:**
   - Edit your `wp-config.php` file
   - Add these lines before `/* That's all, stop editing! */`:
   
   ```php
   define('WP_DEBUG', true);
   define('WP_DEBUG_LOG', true);
   define('WP_DEBUG_DISPLAY', false);
   ```

---

## Testing Instructions

### Test 1: Verify Plugin Activation
1. Go to WordPress Admin → Plugins
2. Confirm "YOLO Yacht Search & Booking v2.5.0" is active
3. Go to YOLO Yacht Search → Settings
4. Verify API key is still configured

### Test 2: Test Availability Check with Known Available Yacht
1. Navigate to: `http://yolo-local.local/yacht-details-page/?yacht_id=7136018700000107850`
2. This is yacht "Strawberry" which we confirmed is available for June 13-20, 2026
3. Select dates: **June 13, 2026 to June 20, 2026**
4. The page should automatically check availability
5. **Expected Result:** Should show price 4,845 EUR with 15% discount
6. **If it shows "Not Available":** Continue to Test 3

### Test 3: Check Debug Logs
1. Open your WordPress debug log file:
   - Location: `wp-content/debug.log`
   - Or use FTP/File Manager to access it

2. Look for entries starting with "YOLO DEBUG":
   ```
   YOLO DEBUG - ajax_get_live_price called
   YOLO DEBUG - yacht_id: 7136018700000107850
   YOLO DEBUG - date_from: 2026-06-13
   YOLO DEBUG - date_to: 2026-06-20
   YOLO DEBUG - get_live_price called with yacht_id: 7136018700000107850
   YOLO DEBUG - Formatted dates: 2026-06-13T17:00:00 to 2026-06-20T17:00:00
   YOLO DEBUG - API result success: true
   YOLO DEBUG - API data type: array
   YOLO DEBUG - API data count: 1
   YOLO DEBUG - API result: Array ( [success] => 1 [available] => 1 [price] => 5700 ... )
   ```

3. **Copy the entire debug log output** and send it to me

### Test 4: Test with Different Yacht
1. Try another yacht from your fleet
2. Select Saturday-to-Saturday dates
3. Check if availability works
4. Note any patterns (e.g., works for some yachts but not others)

---

## What to Send Me

Please provide:

1. **Screenshot** of the yacht details page showing the "Not Available" message (if it still appears)
2. **Debug log entries** - Copy all lines starting with "YOLO DEBUG" from your debug.log file
3. **Browser console errors** - Open browser DevTools (F12), go to Console tab, copy any errors
4. **Network tab data** - In DevTools, go to Network tab, find the "admin-ajax.php" request, copy the Response

---

## Expected Debug Log Output (If Working Correctly)

```
[30-Nov-2025 12:00:00 UTC] YOLO DEBUG - ajax_get_live_price called
[30-Nov-2025 12:00:00 UTC] YOLO DEBUG - yacht_id: 7136018700000107850
[30-Nov-2025 12:00:00 UTC] YOLO DEBUG - date_from: 2026-06-13
[30-Nov-2025 12:00:00 UTC] YOLO DEBUG - date_to: 2026-06-20
[30-Nov-2025 12:00:01 UTC] YOLO DEBUG - get_live_price called with yacht_id: 7136018700000107850
[30-Nov-2025 12:00:01 UTC] YOLO DEBUG - Formatted dates: 2026-06-13T17:00:00 to 2026-06-20T17:00:00
[30-Nov-2025 12:00:02 UTC] YOLO DEBUG - API result success: true
[30-Nov-2025 12:00:02 UTC] YOLO DEBUG - API data type: array
[30-Nov-2025 12:00:02 UTC] YOLO DEBUG - API data count: 1
[30-Nov-2025 12:00:02 UTC] YOLO DEBUG - API result: Array ( [success] => 1 [available] => 1 [price] => 5700 [discount] => 15 [final_price] => 4845 ... )
```

---

## Troubleshooting

### If debug.log file doesn't exist:
1. Make sure you added the WP_DEBUG lines to wp-config.php
2. Create an empty file: `wp-content/debug.log`
3. Set permissions: `chmod 644 wp-content/debug.log`

### If no YOLO DEBUG entries appear:
1. The AJAX call might not be firing
2. Check browser console for JavaScript errors
3. Verify the date picker is working correctly

### If API returns success=false:
1. Check if API key is configured correctly
2. Verify internet connection from server
3. Check if Booking Manager API is accessible

---

## Next Steps

Once I receive your debug logs, I'll be able to:
1. Identify the exact point where the logic fails
2. Determine if it's a PHP issue, JavaScript issue, or API issue
3. Create a final fix and deliver v2.5.0 (production version without debug logs)

---

## Contact

If you have any questions or need help with testing, let me know!
